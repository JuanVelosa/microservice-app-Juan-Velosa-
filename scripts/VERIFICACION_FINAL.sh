#!/bin/bash

echo "ğŸ¯ VERIFICACIÃ“N FINAL DEL SISTEMA"
echo "=================================="
echo ""

echo "âœ… Accede a los servicios con localhost:"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸŒ FRONTEND (Login y Tareas)"
echo "   URL: http://localhost:8081"
echo "   Usuario: admin"
echo "   ContraseÃ±a: admin"
echo ""
echo "   PASOS DE VERIFICACIÃ“N:"
echo "   1. Haz login con admin/admin"
echo "   2. Agrega 3-4 tareas nuevas"
echo "   3. Elimina 1-2 tareas"
echo "   4. Haz logout"
echo "   5. Vuelve a hacer login"
echo "   â†’ Las tareas deben persisitir âœ“"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "ğŸ“Š GRAFANA (Dashboard)"
echo "   URL: http://localhost:3000"
echo "   Usuario: admin"
echo "   ContraseÃ±a: admin"
echo ""
echo "   DASHBOARDS DISPONIBLES:"
echo "   â€¢ Microservices Monitoring (status de servicios)"
echo "   â€¢ Redis Monitoring (mÃ©tricas de Redis)"
echo ""
echo "   PASOS DE VERIFICACIÃ“N:"
echo "   1. Abre http://localhost:3000"
echo "   2. Login con admin/admin"
echo "   3. Ve a Dashboards â†’ Busca 'Redis'"
echo "   4. Verifica que vea grÃ¡ficos con datos âœ“"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "ğŸ“ˆ PROMETHEUS (MÃ©tricas)"
echo "   URL: http://localhost:9090"
echo "   SIN AUTENTICACIÃ“N"
echo ""
echo "   PASOS DE VERIFICACIÃ“N:"
echo "   1. Abre http://localhost:9090"
echo "   2. Haz click en 'Graph'"
echo "   3. Escribe: up"
echo "   4. Clickea 'Execute'"
echo "   â†’ DeberÃ­as ver mÃ©trica 'up{job=\"prometheus\"}' = 1 âœ“"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "ğŸ”— ZIPKIN (Tracing Distribuido)"
echo "   URL: http://localhost:9411"
echo "   SIN AUTENTICACIÃ“N"
echo ""
echo "   Puedes ver trazas de requests entre servicios"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "ğŸ“‹ RESUMEN DE CAMBIOS REALIZADOS:"
echo ""
echo "âœ“ Frontend: Nginx con proxy reverso a todos los servicios"
echo "âœ“ Todos API: Persistencia de tareas en Redis (no memory-cache)"
echo "âœ“ Prometheus: ConfiguraciÃ³n limpia, sin errores 403/404/401/500"
echo "âœ“ Grafana: Dashboard Redis integrado con Prometheus"
echo "âœ“ Port-forwarding: Todos los servicios en localhost:XXXX"
echo ""

echo "ğŸ› Si algo no funciona:"
echo ""
echo "Backend (tareas no persisten):"
echo "  kubectl logs deployment/todos-api -n microservices"
echo ""
echo "Grafana no carga:"
echo "  kubectl logs deployment/grafana -n microservices"
echo ""
echo "Prometheus sin datos:"
echo "  kubectl logs deployment/prometheus -n microservices"
echo ""
echo "Frontend con errores:"
echo "  kubectl logs deployment/frontend -n microservices"
echo ""
